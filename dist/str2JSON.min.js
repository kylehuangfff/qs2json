!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():e.str2JSON=t()}(this,function(){"use strict";return function(e){e=e||"";for(var t=/([^=&]*)=([^=&]*)/g,i=/([^\.]+)/g,f=/([^\[\]]*)\[(\d+)?\]/,d=/([^\[\]]*)\[\]/,u={},n=function(e,t){for(var n,o=u,p=0,f=e.split(".");i.exec(e);){var r;n=RegExp.$1,++p===f.length?d.test(n)?o[r=RegExp.$1]?o[r].push(t):o[r]=[t]:o[n]=t:o=o[n]?o[n]:d.test(n)?o[r=RegExp.$1]=[]:o[n]={}}},r=function(e,t,n,o){for(var p in o[t]||(o[t]=[]),""!==n?o[t][n]=o[e]:o[t].push(o[e]),o[e])f.test(p)&&r(p,RegExp.$1,RegExp.$2,o[e]);delete o[e]};t.exec(e);)n(decodeURIComponent(RegExp.$1),decodeURIComponent(RegExp.$2));for(var o in u)f.test(o)&&r(o,RegExp.$1,RegExp.$2,u);return u}});